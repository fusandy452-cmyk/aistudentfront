<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç•™å­¸é¡§å• - å®¶é•·å°ˆå€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.__CONFIG__ = {
            API_BASE: 'https://aistudentbackend.zeabur.app/api/v1'
        };
    </script>
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.4s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        .message-bubble {
            @apply max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg px-4 py-2 rounded-2xl;
        }
        
        .message-user {
            @apply bg-green-500 text-white ml-auto;
        }
        
        .message-ai {
            @apply bg-gray-100 text-gray-800 mr-auto;
        }
        
        .typing-indicator {
            @apply flex space-x-1;
        }
        
        .typing-dot {
            @apply w-2 h-2 bg-gray-400 rounded-full animate-pulse;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-emerald-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="text-center mb-8 fade-in">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ AI ç•™å­¸é¡§å• - å®¶é•·å°ˆå€</h1>
            <p class="text-lg text-gray-600 mb-6">å°ˆç‚ºå®¶é•·è¨­è¨ˆçš„ç•™å­¸è¦åŠƒè«®è©¢å¹³å°</p>
            
            <!-- è§’è‰²åˆ‡æ› -->
            <div class="flex justify-center space-x-4 mb-6">
                <button onclick="switchRole('parent')" 
                        class="px-6 py-2 bg-green-600 text-white rounded-lg font-medium transition-colors">
                    ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶é•·æ¨¡å¼
                </button>
                <button onclick="switchRole('student')" 
                        class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors hover:bg-gray-400">
                    ğŸ‘¨â€ğŸ“ å­¸ç”Ÿæ¨¡å¼
                </button>
            </div>
        </div>

        <!-- èŠå¤©å€åŸŸ -->
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden fade-in">
            <!-- èŠå¤©æ¨™é¡Œ -->
            <div class="bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-4">
                <h2 class="text-xl font-semibold text-white">èˆ‡ AI é¡§å•å°è©±ï¼ˆå®¶é•·æ¨¡å¼ï¼‰</h2>
                <p class="text-green-100 text-sm">æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å•ï¼Œå¯ä»¥å”åŠ©æ‚¨äº†è§£å­©å­çš„ç•™å­¸è¦åŠƒ</p>
            </div>

            <!-- èŠå¤©å…§å®¹ -->
            <div id="chatContainer" class="h-96 overflow-y-auto p-6 space-y-4">
                <!-- æ­¡è¿è¨Šæ¯ -->
                <div class="message-bubble message-ai slide-in">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                            AI
                        </div>
                        <div>
                            <p class="font-medium text-gray-700 mb-1">AI ç•™å­¸é¡§å•</p>
                            <p>æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å• ğŸ¤–</p>
                            <p class="mt-2">ä½œç‚ºå®¶é•·ï¼Œæˆ‘å¯ä»¥å¹«åŠ©æ‚¨ï¼š</p>
                            <ul class="list-disc list-inside text-sm mt-1 space-y-1">
                                <li>äº†è§£å­©å­çš„ç•™å­¸ç”³è«‹é€²åº¦</li>
                                <li>è©•ä¼°ç•™å­¸æŠ•è³‡å›å ±</li>
                                <li>è¦åŠƒå®¶åº­è²¡å‹™é ç®—</li>
                                <li>äº†è§£å¦‚ä½•æ”¯æŒå­©å­çš„ç”³è«‹</li>
                                <li>è§£ç­”ç•™å­¸ç›¸é—œç–‘å•</li>
                            </ul>
                            <p class="mt-2">è«‹å‘Šè¨´æˆ‘æ‚¨çš„å•é¡Œï¼Œæˆ‘æœƒç‚ºæ‚¨æä¾›å°ˆæ¥­çš„å»ºè­°ï¼</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¼¸å…¥å€åŸŸ -->
            <div class="border-t border-gray-200 p-6">
                <div class="flex space-x-4">
                    <input type="text" id="messageInput" 
                           placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œ..." 
                           class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                           onkeypress="handleKeyPress(event)">
                    <button onclick="sendMessage()" 
                            class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium">
                        ç™¼é€
                    </button>
                </div>
                
                <!-- å¿«é€Ÿå•é¡ŒæŒ‰éˆ• -->
                <div class="mt-4">
                    <p class="text-sm text-gray-600 mb-2">å¿«é€Ÿå•é¡Œï¼š</p>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="askQuickQuestion('æˆ‘å­©å­ SAT è€ƒäº† 1450ï¼Œå€¼å¾—æŠ•è³‡ç•™å­¸å—ï¼Ÿ')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ“Š SAT 1450 æŠ•è³‡å›å ±
                        </button>
                        <button onclick="askQuickQuestion('ç•™å­¸è²»ç”¨é ç®—å’Œè²¡å‹™è¦åŠƒ')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ’° è²¡å‹™è¦åŠƒ
                        </button>
                        <button onclick="askQuickQuestion('å¦‚ä½•æ”¯æŒå­©å­çš„ç”³è«‹éç¨‹')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ¤ æ”¯æŒå­©å­
                        </button>
                        <button onclick="askQuickQuestion('ç•™å­¸é¢¨éšªè©•ä¼°å’Œæ‡‰å°ç­–ç•¥')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            âš ï¸ é¢¨éšªè©•ä¼°
                        </button>
                        <button onclick="askQuickQuestion('å­©å­æœªä¾†è·æ¥­ç™¼å±•å‰æ™¯')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ¯ è·æ¥­å‰æ™¯
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŠŸèƒ½å€åŸŸ -->
        <div class="max-w-4xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- å­©å­è³‡æ–™å¡ç‰‡ -->
            <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ‘¨â€ğŸ“ å­©å­è³‡æ–™</h3>
                <div id="profileInfo" class="space-y-2 text-sm text-gray-600">
                    <p>è¼‰å…¥ä¸­...</p>
                </div>
                <button onclick="updateProfile()" 
                        class="mt-4 w-full px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors">
                    æ›´æ–°è³‡æ–™
                </button>
            </div>

            <!-- è²¡å‹™è¦åŠƒ -->
            <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ’° è²¡å‹™è¦åŠƒ</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">å¹´åº¦é ç®—</span>
                        <span class="text-green-600 font-medium" id="budgetAmount">-</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">å­¸è²»é ä¼°</span>
                        <span class="text-blue-600 font-medium">$50,000-80,000</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">ç”Ÿæ´»è²»é ä¼°</span>
                        <span class="text-purple-600 font-medium">$15,000-25,000</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">çå­¸é‡‘æ©Ÿæœƒ</span>
                        <span class="text-yellow-600 font-medium">ä¸­ç­‰</span>
                    </div>
                </div>
            </div>

            <!-- é‡è¦æé†’ -->
            <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">âš ï¸ é‡è¦æé†’</h3>
                <div class="space-y-3 text-sm">
                    <div class="flex items-start space-x-2">
                        <span class="text-red-500">ğŸ”´</span>
                        <span class="text-gray-600">è²¡å‹™è­‰æ˜æº–å‚™ï¼šå»ºè­°æå‰3å€‹æœˆ</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <span class="text-yellow-500">ğŸŸ¡</span>
                        <span class="text-gray-600">çå­¸é‡‘ç”³è«‹ï¼šå¤šæ•¸æˆªæ­¢æ—¥æœŸåœ¨12æœˆ</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <span class="text-blue-500">ğŸ”µ</span>
                        <span class="text-gray-600">ç°½è­‰ç”³è«‹ï¼šéŒ„å–å¾Œç«‹å³é–‹å§‹æº–å‚™</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- æŠ•è³‡å›å ±åˆ†æ -->
        <div class="max-w-4xl mx-auto mt-8 bg-white rounded-xl shadow-lg p-6 fade-in">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“Š ç•™å­¸æŠ•è³‡å›å ±åˆ†æ</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-medium text-gray-700 mb-2">æŠ•è³‡æˆæœ¬</h4>
                    <ul class="space-y-1 text-sm text-gray-600">
                        <li>â€¢ å­¸è²»ï¼š$200,000-320,000 (4å¹´)</li>
                        <li>â€¢ ç”Ÿæ´»è²»ï¼š$60,000-100,000 (4å¹´)</li>
                        <li>â€¢ å…¶ä»–è²»ç”¨ï¼š$20,000-40,000</li>
                        <li>â€¢ ç¸½è¨ˆï¼š$280,000-460,000</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium text-gray-700 mb-2">é æœŸå›å ±</h4>
                    <ul class="space-y-1 text-sm text-gray-600">
                        <li>â€¢ èµ·è–ªï¼š$60,000-120,000/å¹´</li>
                        <li>â€¢ è·æ¥­ç™¼å±•ï¼šæ›´å»£é—Šçš„åœ‹éš›è¦–é‡</li>
                        <li>â€¢ äººè„ˆç¶²çµ¡ï¼šåœ‹éš›æ ¡å‹è³‡æº</li>
                        <li>â€¢ å›å ±æœŸï¼š5-8å¹´</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentRole = 'parent';
        let profileId = null;
        let chatHistory = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadProfile();
        });

        // è¼‰å…¥å­©å­è³‡æ–™
        async function loadProfile() {
            // é€™è£¡å¯ä»¥å¾ localStorage æˆ– URL åƒæ•¸ç²å– profile_id
            const urlParams = new URLSearchParams(window.location.search);
            profileId = urlParams.get('profile_id') || localStorage.getItem('profile_id');
            
            if (profileId) {
                try {
                    const response = await fetch(`${window.__CONFIG__.API_BASE}/admin/profile/${profileId}`);
                    const result = await response.json();
                    
                    if (result.ok) {
                        displayProfile(result.data.profile);
                    }
                } catch (error) {
                    console.error('è¼‰å…¥å­©å­è³‡æ–™éŒ¯èª¤:', error);
                }
            } else {
                // å¦‚æœæ²’æœ‰ profile_idï¼Œé¡¯ç¤ºæç¤º
                document.getElementById('profileInfo').innerHTML = '<p class="text-gray-500">è«‹å…ˆå®Œæˆæ¸¬è©•è¡¨å–®</p>';
            }
        }

        // é¡¯ç¤ºå­©å­è³‡æ–™
        function displayProfile(profile) {
            const profileInfo = document.getElementById('profileInfo');
            profileInfo.innerHTML = `
                <p><strong>å­©å­å§“åï¼š</strong>${profile.student_name}</p>
                <p><strong>å°±è®€å­¸æ ¡ï¼š</strong>${profile.high_school}</p>
                <p><strong>GPAï¼š</strong>${profile.gpa}/4.0</p>
                <p><strong>ç›®æ¨™å°ˆæ¥­ï¼š</strong>${profile.intended_major}</p>
                <p><strong>ç›®æ¨™åœ‹å®¶ï¼š</strong>${profile.countries.join(', ')}</p>
                <p><strong>å®¶åº­é ç®—ï¼š</strong>$${profile.budget.toLocaleString()}/å¹´</p>
            `;

            // æ›´æ–°è²¡å‹™è¦åŠƒ
            document.getElementById('budgetAmount').textContent = `$${profile.budget.toLocaleString()}/å¹´`;
        }

        // åˆ‡æ›è§’è‰²
        function switchRole(role) {
            currentRole = role;
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            const buttons = document.querySelectorAll('button[onclick^="switchRole"]');
            buttons.forEach(btn => {
                if (btn.onclick.toString().includes(role)) {
                    btn.className = 'px-6 py-2 bg-green-600 text-white rounded-lg font-medium transition-colors';
                } else {
                    btn.className = 'px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors hover:bg-gray-400';
                }
            });

            // æ›´æ–°èŠå¤©æ¨™é¡Œ
            const title = document.querySelector('h2');
            const subtitle = document.querySelector('p');
            
            if (role === 'parent') {
                title.textContent = 'èˆ‡ AI é¡§å•å°è©±ï¼ˆå®¶é•·æ¨¡å¼ï¼‰';
                subtitle.textContent = 'æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å•ï¼Œå¯ä»¥å”åŠ©æ‚¨äº†è§£å­©å­çš„ç•™å­¸è¦åŠƒ';
            } else {
                title.textContent = 'èˆ‡ AI é¡§å•å°è©±';
                subtitle.textContent = 'æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å•ï¼Œå¯ä»¥å”åŠ©æ‚¨è¦åŠƒç•™å­¸ç”³è«‹çš„å„å€‹ç’°ç¯€';
            }

            // æ¸…ç©ºèŠå¤©è¨˜éŒ„
            document.getElementById('chatContainer').innerHTML = '';
            chatHistory = [];
            
            // æ·»åŠ æ­¡è¿è¨Šæ¯
            addWelcomeMessage();
        }

        // æ·»åŠ æ­¡è¿è¨Šæ¯
        function addWelcomeMessage() {
            const container = document.getElementById('chatContainer');
            const welcomeMsg = currentRole === 'parent' ? 
                `æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å• ğŸ¤–

                ä½œç‚ºå®¶é•·ï¼Œæˆ‘å¯ä»¥å¹«åŠ©æ‚¨ï¼š
                â€¢ äº†è§£å­©å­çš„ç•™å­¸ç”³è«‹é€²åº¦
                â€¢ è©•ä¼°ç•™å­¸æŠ•è³‡å›å ±
                â€¢ è¦åŠƒå®¶åº­è²¡å‹™é ç®—
                â€¢ äº†è§£å¦‚ä½•æ”¯æŒå­©å­çš„ç”³è«‹
                â€¢ è§£ç­”ç•™å­¸ç›¸é—œç–‘å•

                è«‹å‘Šè¨´æˆ‘æ‚¨çš„å•é¡Œï¼Œæˆ‘æœƒç‚ºæ‚¨æä¾›å°ˆæ¥­çš„å»ºè­°ï¼` :
                `ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„å°ˆå±¬ç•™å­¸é¡§å• ğŸ¤–

                æˆ‘å¯ä»¥å¹«åŠ©ä½ ï¼š
                â€¢ æ¨è–¦é©åˆçš„å­¸æ ¡å’Œå°ˆæ¥­
                â€¢ è¦åŠƒç”³è«‹æ™‚é–“è¡¨
                â€¢ æä¾›è€ƒè©¦æº–å‚™å»ºè­°
                â€¢ å”åŠ©æ’°å¯«ç”³è«‹æ–‡ä»¶
                â€¢ è§£ç­”ç•™å­¸ç›¸é—œå•é¡Œ

                è«‹å‘Šè¨´æˆ‘ä½ çš„å•é¡Œï¼Œæˆ‘æœƒç‚ºä½ æä¾›å°ˆæ¥­çš„å»ºè­°ï¼`;

            container.innerHTML = `
                <div class="message-bubble message-ai slide-in">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                            AI
                        </div>
                        <div>
                            <p class="font-medium text-gray-700 mb-1">AI ç•™å­¸é¡§å•</p>
                            <p class="whitespace-pre-line">${welcomeMsg}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // ç™¼é€è¨Šæ¯
        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            if (!profileId) {
                alert('è«‹å…ˆå®Œæˆæ¸¬è©•è¡¨å–®');
                return;
            }

            // æ·»åŠ ç”¨æˆ¶è¨Šæ¯åˆ°èŠå¤©
            addMessage(message, 'user');
            input.value = '';

            // é¡¯ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
            showTypingIndicator();

            try {
                const response = await fetch(`${window.__CONFIG__.API_BASE}/chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        profile_id: profileId,
                        message: message,
                        chat_history: chatHistory,
                        user_role: currentRole
                    })
                });

                const result = await response.json();
                
                // éš±è—æ‰“å­—æŒ‡ç¤ºå™¨
                hideTypingIndicator();

                if (result.ok) {
                    addMessage(result.data.response, 'ai');
                    chatHistory.push({ role: 'user', content: message });
                    chatHistory.push({ role: 'assistant', content: result.data.response });
                } else {
                    addMessage('æŠ±æ­‰ï¼Œæˆ‘æš«æ™‚ç„¡æ³•å›æ‡‰ã€‚è«‹ç¨å¾Œå†è©¦ã€‚', 'ai');
                }
            } catch (error) {
                hideTypingIndicator();
                addMessage('æŠ±æ­‰ï¼Œç™¼ç”Ÿäº†éŒ¯èª¤ã€‚è«‹æª¢æŸ¥ç¶²è·¯é€£æ¥å¾Œå†è©¦ã€‚', 'ai');
                console.error('ç™¼é€è¨Šæ¯éŒ¯èª¤:', error);
            }
        }

        // æ·»åŠ è¨Šæ¯åˆ°èŠå¤©
        function addMessage(content, sender) {
            const container = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-bubble message-${sender} fade-in`;
            
            const senderName = sender === 'user' ? (currentRole === 'parent' ? 'å®¶é•·' : 'å­¸ç”Ÿ') : 'AI ç•™å­¸é¡§å•';
            const avatar = sender === 'user' ? (currentRole === 'parent' ? 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' : 'ğŸ‘¨â€ğŸ“') : 'AI';
            
            messageDiv.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 ${sender === 'user' ? 'bg-green-500' : 'bg-green-500'} rounded-full flex items-center justify-center text-white text-sm font-bold">
                        ${avatar}
                    </div>
                    <div>
                        <p class="font-medium text-gray-700 mb-1">${senderName}</p>
                        <p class="whitespace-pre-line">${content}</p>
                    </div>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        // é¡¯ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
        function showTypingIndicator() {
            const container = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'message-bubble message-ai fade-in';
            typingDiv.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                        AI
                    </div>
                    <div>
                        <p class="font-medium text-gray-700 mb-1">AI ç•™å­¸é¡§å•</p>
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot" style="animation-delay: 0.2s"></div>
                            <div class="typing-dot" style="animation-delay: 0.4s"></div>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        // éš±è—æ‰“å­—æŒ‡ç¤ºå™¨
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // å¿«é€Ÿå•é¡Œ
        function askQuickQuestion(question) {
            document.getElementById('messageInput').value = question;
            sendMessage();
        }

        // è™•ç† Enter éµ
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // æ›´æ–°å­©å­è³‡æ–™
        function updateProfile() {
            // é€™è£¡å¯ä»¥è·³è½‰åˆ°æ¸¬è©•è¡¨å–®æˆ–å€‹äººè³‡æ–™ç·¨è¼¯é é¢
            window.location.href = '/';
        }
    </script>
</body>
</html>
