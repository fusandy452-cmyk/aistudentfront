<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç•™å­¸é¡§å• - å­¸ç”Ÿå°ˆå€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.__CONFIG__ = {
            API_BASE: 'https://aistudentbackend.zeabur.app/api/v1'
        };
    </script>
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.4s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        .message-bubble {
            @apply max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg px-4 py-2 rounded-2xl;
        }
        
        .message-user {
            @apply bg-blue-500 text-white ml-auto;
        }
        
        .message-ai {
            @apply bg-gray-100 text-gray-800 mr-auto;
        }
        
        .typing-indicator {
            @apply flex space-x-1;
        }
        
        .typing-dot {
            @apply w-2 h-2 bg-gray-400 rounded-full animate-pulse;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="text-center mb-8 fade-in">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">ğŸ“ AI ç•™å­¸é¡§å• - å­¸ç”Ÿå°ˆå€</h1>
            <p class="text-lg text-gray-600 mb-6">å°ˆç‚ºå­¸ç”Ÿè¨­è¨ˆçš„å€‹äººåŒ–ç•™å­¸è¦åŠƒåŠ©æ‰‹</p>
            
            <!-- è§’è‰²å’Œèªè¨€åˆ‡æ› -->
            <div class="flex flex-col items-center space-y-4 mb-6">
                <!-- è§’è‰²åˆ‡æ› -->
                <div class="flex space-x-4">
                    <button onclick="switchRole('student')" 
                            class="px-6 py-2 bg-blue-600 text-white rounded-lg font-medium transition-colors">
                        ğŸ‘¨â€ğŸ“ <span data-zh="å­¸ç”Ÿæ¨¡å¼" data-en="Student Mode">å­¸ç”Ÿæ¨¡å¼</span>
                    </button>
                    <button onclick="switchRole('parent')" 
                            class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors hover:bg-gray-400">
                        ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ <span data-zh="å®¶é•·æ¨¡å¼" data-en="Parent Mode">å®¶é•·æ¨¡å¼</span>
                    </button>
                </div>
                
                <!-- èªè¨€åˆ‡æ› -->
                <div class="flex items-center space-x-2">
                    <button onclick="switchLanguage('zh')" id="lang-zh" 
                            class="px-3 py-1 text-sm rounded-lg bg-white bg-opacity-50 hover:bg-opacity-75 transition-all">
                        ä¸­æ–‡
                    </button>
                    <button onclick="switchLanguage('en')" id="lang-en" 
                            class="px-3 py-1 text-sm rounded-lg hover:bg-opacity-75 transition-all">
                        English
                    </button>
                </div>
            </div>
        </div>

        <!-- èŠå¤©å€åŸŸ -->
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden fade-in">
            <!-- èŠå¤©æ¨™é¡Œ -->
            <div class="bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4">
                <h2 class="text-xl font-semibold text-white">èˆ‡ AI é¡§å•å°è©±</h2>
                <p class="text-blue-100 text-sm">æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å•ï¼Œå¯ä»¥å”åŠ©æ‚¨è¦åŠƒç•™å­¸ç”³è«‹çš„å„å€‹ç’°ç¯€</p>
            </div>

            <!-- èŠå¤©å…§å®¹ -->
            <div id="chatContainer" class="h-96 overflow-y-auto p-6 space-y-4">
                <!-- æ­¡è¿è¨Šæ¯ -->
                <div class="message-bubble message-ai slide-in">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                            AI
                        </div>
                        <div>
                            <p class="font-medium text-gray-700 mb-1">AI ç•™å­¸é¡§å•</p>
                            <p>ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„å°ˆå±¬ç•™å­¸é¡§å• ğŸ¤–</p>
                            <p class="mt-2">æˆ‘å¯ä»¥å¹«åŠ©ä½ ï¼š</p>
                            <ul class="list-disc list-inside text-sm mt-1 space-y-1">
                                <li>æ¨è–¦é©åˆçš„å­¸æ ¡å’Œå°ˆæ¥­</li>
                                <li>è¦åŠƒç”³è«‹æ™‚é–“è¡¨</li>
                                <li>æä¾›è€ƒè©¦æº–å‚™å»ºè­°</li>
                                <li>å”åŠ©æ’°å¯«ç”³è«‹æ–‡ä»¶</li>
                                <li>è§£ç­”ç•™å­¸ç›¸é—œå•é¡Œ</li>
                            </ul>
                            <p class="mt-2">è«‹å‘Šè¨´æˆ‘ä½ çš„å•é¡Œï¼Œæˆ‘æœƒç‚ºä½ æä¾›å°ˆæ¥­çš„å»ºè­°ï¼</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¼¸å…¥å€åŸŸ -->
            <div class="border-t border-gray-200 p-6">
                <div class="flex space-x-4">
                    <input type="text" id="messageInput" 
                           placeholder="è¼¸å…¥ä½ çš„å•é¡Œ..." 
                           class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           onkeypress="handleKeyPress(event)">
                    <button onclick="sendMessage()" 
                            class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                        ç™¼é€
                    </button>
                </div>
                
                <!-- å¿«é€Ÿå•é¡ŒæŒ‰éˆ• -->
                <div class="mt-4">
                    <p class="text-sm text-gray-600 mb-2">å¿«é€Ÿå•é¡Œï¼š</p>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="askQuickQuestion('æˆ‘ SAT è€ƒäº† 1450ï¼Œèƒ½ç”³è«‹å“ªäº›å­¸æ ¡ï¼Ÿ')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ« SAT 1450 æ¨è–¦å­¸æ ¡
                        </button>
                        <button onclick="askQuickQuestion('ç”³è«‹æµç¨‹å’Œæ™‚é–“è¦åŠƒ')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ“‹ ç”³è«‹æµç¨‹
                        </button>
                        <button onclick="askQuickQuestion('å¦‚ä½•æå‡ SAT æˆç¸¾åˆ° 1500+ï¼Ÿ')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ“š SAT æå‡å»ºè­°
                        </button>
                        <button onclick="askQuickQuestion('çå­¸é‡‘ç”³è«‹ç­–ç•¥')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            ğŸ’° çå­¸é‡‘ç”³è«‹
                        </button>
                        <button onclick="askQuickQuestion('å€‹äººé™³è¿°å¯«ä½œå»ºè­°')" 
                                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors">
                            âœï¸ å€‹äººé™³è¿°
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŠŸèƒ½å€åŸŸ -->
        <div class="max-w-4xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- å€‹äººè³‡æ–™å¡ç‰‡ -->
            <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“Š å€‹äººè³‡æ–™</h3>
                <div id="profileInfo" class="space-y-2 text-sm text-gray-600">
                    <p>è¼‰å…¥ä¸­...</p>
                </div>
                <button onclick="updateProfile()" 
                        class="mt-4 w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors">
                    æ›´æ–°è³‡æ–™
                </button>
            </div>

            <!-- ç”³è«‹é€²åº¦ -->
            <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“ˆ ç”³è«‹é€²åº¦</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">æ¸¬è©•å®Œæˆ</span>
                        <span class="text-green-600 font-medium">âœ… å®Œæˆ</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">å­¸æ ¡ç ”ç©¶</span>
                        <span class="text-yellow-600 font-medium">ğŸ”„ é€²è¡Œä¸­</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">è€ƒè©¦æº–å‚™</span>
                        <span class="text-gray-400 font-medium">â³ å¾…é–‹å§‹</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">æ–‡ä»¶æº–å‚™</span>
                        <span class="text-gray-400 font-medium">â³ å¾…é–‹å§‹</span>
                    </div>
                </div>
            </div>

            <!-- é‡è¦æé†’ -->
            <div class="bg-white rounded-xl shadow-lg p-6 fade-in">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">âš ï¸ é‡è¦æé†’</h3>
                <div class="space-y-3 text-sm">
                    <div class="flex items-start space-x-2">
                        <span class="text-red-500">ğŸ”´</span>
                        <span class="text-gray-600">SAT è€ƒè©¦å ±åæˆªæ­¢ï¼š12æœˆ15æ—¥</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <span class="text-yellow-500">ğŸŸ¡</span>
                        <span class="text-gray-600">æ¨è–¦ä¿¡æº–å‚™ï¼šå»ºè­°æå‰2å€‹æœˆè¯ç¹«è€å¸«</span>
                    </div>
                    <div class="flex items-start space-x-2">
                        <span class="text-blue-500">ğŸ”µ</span>
                        <span class="text-gray-600">å€‹äººé™³è¿°åˆç¨¿ï¼šå»ºè­°1æœˆåº•å®Œæˆ</span>
                    </div>
                </div>
                
                <!-- LINE è¯ç¹«æŒ‰éˆ• -->
                <div class="mt-4 pt-4 border-t border-gray-200">
                    <p class="text-sm text-gray-600 mb-3">éœ€è¦çœŸäººé¡§å•å”åŠ©ï¼Ÿ</p>
                    <a href="https://lin.ee/sxBIfb9" target="_blank" 
                       class="inline-flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm">
                        <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
                        </svg>
                        åŠ å…¥ LINE å®˜æ–¹å¸³è™Ÿ
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentRole = 'student';
        let profileId = null;
        let chatHistory = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadProfile();
        });

        // è¼‰å…¥å€‹äººè³‡æ–™
        async function loadProfile() {
            // é€™è£¡å¯ä»¥å¾ localStorage æˆ– URL åƒæ•¸ç²å– profile_id
            const urlParams = new URLSearchParams(window.location.search);
            profileId = urlParams.get('profile_id') || localStorage.getItem('profile_id');
            
            if (profileId) {
                try {
                    const response = await fetch(`${window.__CONFIG__.API_BASE}/admin/profile/${profileId}`);
                    const result = await response.json();
                    
                    if (result.ok) {
                        displayProfile(result.data.profile);
                    }
                } catch (error) {
                    console.error('è¼‰å…¥å€‹äººè³‡æ–™éŒ¯èª¤:', error);
                }
            } else {
                // å¦‚æœæ²’æœ‰ profile_idï¼Œé¡¯ç¤ºæç¤º
                document.getElementById('profileInfo').innerHTML = '<p class="text-gray-500">è«‹å…ˆå®Œæˆæ¸¬è©•è¡¨å–®</p>';
            }
        }

        // é¡¯ç¤ºå€‹äººè³‡æ–™
        function displayProfile(profile) {
            const profileInfo = document.getElementById('profileInfo');
            profileInfo.innerHTML = `
                <p><strong>å§“åï¼š</strong>${profile.student_name}</p>
                <p><strong>å­¸æ ¡ï¼š</strong>${profile.high_school}</p>
                <p><strong>GPAï¼š</strong>${profile.gpa}/4.0</p>
                <p><strong>ç›®æ¨™å°ˆæ¥­ï¼š</strong>${profile.intended_major}</p>
                <p><strong>ç›®æ¨™åœ‹å®¶ï¼š</strong>${profile.countries.join(', ')}</p>
                <p><strong>é ç®—ï¼š</strong>$${profile.budget.toLocaleString()}/å¹´</p>
            `;
        }

        // åˆ‡æ›è§’è‰²
        function switchRole(role) {
            currentRole = role;
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            const buttons = document.querySelectorAll('button[onclick^="switchRole"]');
            buttons.forEach(btn => {
                if (btn.onclick.toString().includes(role)) {
                    btn.className = 'px-6 py-2 bg-blue-600 text-white rounded-lg font-medium transition-colors';
                } else {
                    btn.className = 'px-6 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors hover:bg-gray-400';
                }
            });

            // æ›´æ–°èŠå¤©æ¨™é¡Œ
            const title = document.querySelector('h2');
            const subtitle = document.querySelector('p');
            
            if (role === 'parent') {
                title.textContent = 'èˆ‡ AI é¡§å•å°è©±ï¼ˆå®¶é•·æ¨¡å¼ï¼‰';
                subtitle.textContent = 'æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å•ï¼Œå¯ä»¥å”åŠ©æ‚¨äº†è§£å­©å­çš„ç•™å­¸è¦åŠƒ';
            } else {
                title.textContent = 'èˆ‡ AI é¡§å•å°è©±';
                subtitle.textContent = 'æˆ‘æ˜¯æ‚¨çš„å°ˆå±¬ç•™å­¸é¡§å•ï¼Œå¯ä»¥å”åŠ©æ‚¨è¦åŠƒç•™å­¸ç”³è«‹çš„å„å€‹ç’°ç¯€';
            }

            // æ¸…ç©ºèŠå¤©è¨˜éŒ„
            document.getElementById('chatContainer').innerHTML = '';
            chatHistory = [];
            
            // æ·»åŠ æ­¡è¿è¨Šæ¯
            addWelcomeMessage();
        }

        // æ·»åŠ æ­¡è¿è¨Šæ¯
        function addWelcomeMessage() {
            const container = document.getElementById('chatContainer');
            const welcomeMsg = currentRole === 'parent' ? 
                `ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„å°ˆå±¬ç•™å­¸é¡§å• ğŸ¤–

                ä½œç‚ºå®¶é•·ï¼Œæˆ‘å¯ä»¥å¹«åŠ©ä½ ï¼š
                â€¢ äº†è§£å­©å­çš„ç•™å­¸ç”³è«‹é€²åº¦
                â€¢ è©•ä¼°ç•™å­¸æŠ•è³‡å›å ±
                â€¢ è¦åŠƒå®¶åº­è²¡å‹™é ç®—
                â€¢ äº†è§£å¦‚ä½•æ”¯æŒå­©å­çš„ç”³è«‹
                â€¢ è§£ç­”ç•™å­¸ç›¸é—œç–‘å•

                è«‹å‘Šè¨´æˆ‘ä½ çš„å•é¡Œï¼Œæˆ‘æœƒç‚ºä½ æä¾›å°ˆæ¥­çš„å»ºè­°ï¼` :
                `ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„å°ˆå±¬ç•™å­¸é¡§å• ğŸ¤–

                æˆ‘å¯ä»¥å¹«åŠ©ä½ ï¼š
                â€¢ æ¨è–¦é©åˆçš„å­¸æ ¡å’Œå°ˆæ¥­
                â€¢ è¦åŠƒç”³è«‹æ™‚é–“è¡¨
                â€¢ æä¾›è€ƒè©¦æº–å‚™å»ºè­°
                â€¢ å”åŠ©æ’°å¯«ç”³è«‹æ–‡ä»¶
                â€¢ è§£ç­”ç•™å­¸ç›¸é—œå•é¡Œ

                è«‹å‘Šè¨´æˆ‘ä½ çš„å•é¡Œï¼Œæˆ‘æœƒç‚ºä½ æä¾›å°ˆæ¥­çš„å»ºè­°ï¼`;

            container.innerHTML = `
                <div class="message-bubble message-ai slide-in">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                            AI
                        </div>
                        <div>
                            <p class="font-medium text-gray-700 mb-1">AI ç•™å­¸é¡§å•</p>
                            <p class="whitespace-pre-line">${welcomeMsg}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // ç™¼é€è¨Šæ¯
        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            if (!profileId) {
                alert('è«‹å…ˆå®Œæˆæ¸¬è©•è¡¨å–®');
                return;
            }

            // æ·»åŠ ç”¨æˆ¶è¨Šæ¯åˆ°èŠå¤©
            addMessage(message, 'user');
            input.value = '';

            // é¡¯ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
            showTypingIndicator();

            try {
                const response = await fetch(`${window.__CONFIG__.API_BASE}/chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        profile_id: profileId,
                        message: message,
                        chat_history: chatHistory,
                        user_role: currentRole
                    })
                });

                const result = await response.json();
                
                // éš±è—æ‰“å­—æŒ‡ç¤ºå™¨
                hideTypingIndicator();

                if (result.ok) {
                    addMessage(result.data.response, 'ai');
                    chatHistory.push({ role: 'user', content: message });
                    chatHistory.push({ role: 'assistant', content: result.data.response });
                } else {
                    addMessage('æŠ±æ­‰ï¼Œæˆ‘æš«æ™‚ç„¡æ³•å›æ‡‰ã€‚è«‹ç¨å¾Œå†è©¦ã€‚', 'ai');
                }
            } catch (error) {
                hideTypingIndicator();
                addMessage('æŠ±æ­‰ï¼Œç™¼ç”Ÿäº†éŒ¯èª¤ã€‚è«‹æª¢æŸ¥ç¶²è·¯é€£æ¥å¾Œå†è©¦ã€‚', 'ai');
                console.error('ç™¼é€è¨Šæ¯éŒ¯èª¤:', error);
            }
        }

        // æ·»åŠ è¨Šæ¯åˆ°èŠå¤©
        function addMessage(content, sender) {
            const container = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-bubble message-${sender} fade-in`;
            
            const senderName = sender === 'user' ? (currentRole === 'parent' ? 'å®¶é•·' : 'å­¸ç”Ÿ') : 'AI ç•™å­¸é¡§å•';
            const avatar = sender === 'user' ? (currentRole === 'parent' ? 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' : 'ğŸ‘¨â€ğŸ“') : 'AI';
            
            messageDiv.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 ${sender === 'user' ? 'bg-gray-500' : 'bg-blue-500'} rounded-full flex items-center justify-center text-white text-sm font-bold">
                        ${avatar}
                    </div>
                    <div>
                        <p class="font-medium text-gray-700 mb-1">${senderName}</p>
                        <p class="whitespace-pre-line">${content}</p>
                    </div>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        // é¡¯ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
        function showTypingIndicator() {
            const container = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'message-bubble message-ai fade-in';
            typingDiv.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                        AI
                    </div>
                    <div>
                        <p class="font-medium text-gray-700 mb-1">AI ç•™å­¸é¡§å•</p>
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot" style="animation-delay: 0.2s"></div>
                            <div class="typing-dot" style="animation-delay: 0.4s"></div>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        // éš±è—æ‰“å­—æŒ‡ç¤ºå™¨
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // å¿«é€Ÿå•é¡Œ
        function askQuickQuestion(question) {
            document.getElementById('messageInput').value = question;
            sendMessage();
        }

        // è™•ç† Enter éµ
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // æ›´æ–°å€‹äººè³‡æ–™
        function updateProfile() {
            // é€™è£¡å¯ä»¥è·³è½‰åˆ°æ¸¬è©•è¡¨å–®æˆ–å€‹äººè³‡æ–™ç·¨è¼¯é é¢
            window.location.href = '/';
        }
    </script>
</body>
</html>
